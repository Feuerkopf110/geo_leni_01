<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>OpenLayers Übung</title>
        <link rel="stylesheet" href="style.css" />
        <link rel="stylesheet" href="libs\ol.css" />
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="index.html">Startseite</a></li>
                    <li><a href="karte1.html" class="active">Karte 1</a></li>
                    <li><a href="karte2.html">Karte 2</a></li>
                    <li><a href="karte3.html">Karte 3</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <h1>Karte 1: GeoJSON Daten</h1>
            <div id="map" style="width: 100%; height: 500px"></div>
        </main>
        <script src="libs\ol.js"></script>
        <script src="libs\papaparse.js"></script>
        <script src="libs\script.js"></script>
        <script>
            // OpenLayers Karte initialisieren
            const OSM = new ol.layer.Tile({
                source: new ol.source.OSM(),
            });
            const geojson = new ol.layer.Vector({
                source: new ol.source.Vector({
                    url: "data/bundeslaender.geojson", // GeoJSON-Datei für Bundesländer
                    format: new ol.format.GeoJSON(),
                }),
                style: new ol.style.Style({
                    fill: new ol.style.Fill({
                        color: "rgba(0, 123, 255, 0.5)", // Transparente blaue Flächen
                    }),
                    stroke: new ol.style.Stroke({
                        color: "#007bff",
                        width: 2,
                    }),
                }),
            });

            // Punkt-Layer für Windkraftanlagen
            const pointLayer = new ol.layer.Vector({
                source: new ol.source.Vector({
                    url: "data/numberOfWindTurbinesByLand.geojson", // Punktdaten-GeoJSON für Windkraftanlagen
                    format: new ol.format.GeoJSON(),
                }),
                style: circles,
            });
            function circles(feature) {
                const value = feature.getProperties().value; // Wert des Punktes (z. B. Anzahl)
                const radiusMin = 2.2;
                const radiusMax = 20;
                const valueMin = 12; // Minimaler Wert
                const valueMax = 100; // Maximaler Wert

                // Radius proportional zum Wert skalieren
                let radius = radiusMin * Math.sqrt(value / valueMin);

                return new ol.style.Style({
                    zIndex: -feature.getProperties().value,
                    image: new ol.style.Circle({
                        radius: radius,
                        fill: new ol.style.Fill({
                            color: "rgba(255, 0, 0, 0.7)", // Rote Punkte
                        }),
                        stroke: new ol.style.Stroke({
                            color: "#ff0000",
                            width: 1,
                        }),
                    }),
                });
            }
            const map = new ol.Map({
                target: "map", // ID des Containers
                layers: [OSM, geojson, pointLayer],

                view: new ol.View({
                    center: ol.proj.fromLonLat([10.0, 51.0]), // Mittelpunkt Deutschland
                    zoom: 6,
                }),
            });
        </script>
    </body>
</html>
